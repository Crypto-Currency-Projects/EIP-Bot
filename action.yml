name: "Rerun Old Bot Run (pull_request_target) on review"
description: "This is a hack and requires workflow_run event trigger type"
inputs:
  GITHUB-TOKEN:
    description: |-
      The Github token to be used by this bot when merging, posting comments, or requesting reviewers
    required: true
  PULL-NUMBER:
    description: |-
      The number of the pull-request with the desired ID and event type to re-run
    required: true
  ID-TO-RERUN:
    description: |-
      Every workflow has an ID, and you must include the id here to let this action know which workflow to rerun
    required: true
  EVENT-TYPE:
    description: |-
      The name of the event triggering this workflow that you want to rerun
    required: true

runs:
  using: "composite"
  steps:
    - run: cd ${{github.action_path}} && yarn install && yarn build && EVENT_TYPE=${{inputs.EVENT-TYPE}} GITHUB_TOKEN=${{ inputs.GITHUB-TOKEN }} ID_TO_RERUN=${{ inputs.ID-TO-RERUN }} PULL_NUMBER=${{ inputs.PULL-NUMBER }} node build/index.js
      shell: bash
